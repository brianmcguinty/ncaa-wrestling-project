<?php
if (!(isset($_COOKIE["wcuid"])))
  header("Location: http://www.important-info.com/ncaa/");
?>

<html>
<head>
    <title>NCAA Wrestling Championships - Pick'm Contests - Contests</title>
    <link rel="stylesheet" href="css/wrestlingContestStyle.css" type="text/css" />
</head>
	<script type="text/javascript" src="http://www.important-info.com/ncaa/jquery/jquery-1.7.2.min.js"></script>
	<script type="text/javascript" src="http://www.important-info.com/ncaa/jquery/jquery.popupWindow.js"></script>
	<script type="text/javascript" src="http://www.important-info.com/ncaa/jquery/jquery.DOMWindow.js"></script>
	<script language="javascript" type="text/javascript">
<!-- 
//Browser Support Code
function pickContestFunction( weight ){
	var ajaxRequest;  // The variable that makes Ajax possible!
	
	try{
		// Opera 8.0+, Firefox, Safari
		ajaxRequest = new XMLHttpRequest();
	} catch (e){
		// Internet Explorer Browsers
		try{
			ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
		} catch (e) {
			try{
				ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
			} catch (e){
				// Something went wrong
				alert("Your browser broke!");
				return false;
			}
		}
	}
	// Create a function that will receive data sent from the server
	ajaxRequest.onreadystatechange = function(){
		if(ajaxRequest.readyState == 4){
			var ajaxDisplay = document.getElementById('pick_contest_div');
			ajaxDisplay.innerHTML = ajaxRequest.responseText;
		}
	}
	var contest = document.getElementById('contest').value;
	var queryString = "?contest=" + contest;
	if( (contest == "pick_all_americans") || (contest =="pick_all_americans_placement") )
	{
		queryString = queryString + "&weight=" + weight;
	}

	ajaxRequest.open("GET", "http://www.important-info.com/ncaa/php/get_contest.php"+queryString, true);
	ajaxRequest.send(null); 
}

function submitIndividualWinnerPicks(){
	var ajaxRequest;  // The variable that makes Ajax possible!
	
	try{
		// Opera 8.0+, Firefox, Safari
		ajaxRequest = new XMLHttpRequest();
	} catch (e){
		// Internet Explorer Browsers
		try{
			ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
		} catch (e) {
			try{
				ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
			} catch (e){
				// Something went wrong
				alert("Your browser broke!");
				return false;
			}
		}
	}
	// Create a function that will receive data sent from the server
	ajaxRequest.onreadystatechange = function(){
		if(ajaxRequest.readyState == 4){
			var ajaxDisplay = document.getElementById('pick_contest_div');
			ajaxDisplay.innerHTML = ajaxRequest.responseText;
		}
	}
	var winner_125 = document.getElementById('125_lb_winner').value;
	var winner_133 = document.getElementById('133_lb_winner').value;
	var winner_141 = document.getElementById('141_lb_winner').value;
	var winner_149 = document.getElementById('149_lb_winner').value;
	var winner_157 = document.getElementById('157_lb_winner').value;
	var winner_165 = document.getElementById('165_lb_winner').value;
	var winner_174 = document.getElementById('174_lb_winner').value;
	var winner_184 = document.getElementById('184_lb_winner').value;
	var winner_197 = document.getElementById('197_lb_winner').value;
	var winner_285 = document.getElementById('285_lb_winner').value;

	var queryString = "?winner_125=" + winner_125;
	queryString = queryString + "&winner_133=" + winner_133;
	queryString = queryString + "&winner_141=" + winner_141;
	queryString = queryString + "&winner_149=" + winner_149;
	queryString = queryString + "&winner_157=" + winner_157;
	queryString = queryString + "&winner_165=" + winner_165;
	queryString = queryString + "&winner_174=" + winner_174;
	queryString = queryString + "&winner_184=" + winner_184;
	queryString = queryString + "&winner_197=" + winner_197;
	queryString = queryString + "&winner_285=" + winner_285;
	queryString = queryString + "&wcuid=" + getCookie( "wcuid" );
	ajaxRequest.open("GET", "http://www.important-info.com/ncaa/php/submit_pick_winners.php"+queryString, true);
	ajaxRequest.send(null); 
}

function submitAllAmericanPicks( weight ) {
	var ajaxRequest;  // The variable that makes Ajax possible!

	//alert("|" + document.getElementById('AA_125_lb_1') + "|" );

	try{
		// Opera 8.0+, Firefox, Safari
		ajaxRequest = new XMLHttpRequest();
	} catch (e){
		// Internet Explorer Browsers
		try{
			ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
		} catch (e) {
			try{
				ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
			} catch (e){
				// Something went wrong
				alert("Your browser broke!");
				return false;
			}
		}
	}

	// Create a function that will receive data sent from the server
	ajaxRequest.onreadystatechange = function(){
		if(ajaxRequest.readyState == 4){
			var ajaxDisplay = document.getElementById('pick_contest_div');
			ajaxDisplay.innerHTML = ajaxRequest.responseText;
		}
	}

	var ident_string_1 = "AA_" + weight + "_lb_1";
	var ident_string_2 = "AA_" + weight + "_lb_2";
	var ident_string_3 = "AA_" + weight + "_lb_3";
	var ident_string_4 = "AA_" + weight + "_lb_4";
	var ident_string_5 = "AA_" + weight + "_lb_5";
	var ident_string_6 = "AA_" + weight + "_lb_6";
	var ident_string_7 = "AA_" + weight + "_lb_7";
	var ident_string_8 = "AA_" + weight + "_lb_8";

	//alert("Got weight var " + ident_string );

	var AA_125_lb_1 = document.getElementById(ident_string_1).value;
	var AA_125_lb_2 = document.getElementById(ident_string_2).value;
	var AA_125_lb_3 = document.getElementById(ident_string_3).value;
	var AA_125_lb_4 = document.getElementById(ident_string_4).value;
	var AA_125_lb_5 = document.getElementById(ident_string_5).value;
	var AA_125_lb_6 = document.getElementById(ident_string_6).value;
	var AA_125_lb_7 = document.getElementById(ident_string_7).value;
	var AA_125_lb_8 = document.getElementById(ident_string_8).value;
	if( (AA_125_lb_1 == AA_125_lb_2) || (AA_125_lb_1 == AA_125_lb_3) || (AA_125_lb_1 == AA_125_lb_4) || (AA_125_lb_1 == AA_125_lb_5) || (AA_125_lb_1 == AA_125_lb_6) || (AA_125_lb_1 == AA_125_lb_7) || (AA_125_lb_1 == AA_125_lb_8) )
	{
		alert("You have picked" + AA_125_lb_1 + " more than once." );
		document.getElementById('AA_125_lb_1').focus();
		return;
	}
	if( (AA_125_lb_2 == AA_125_lb_3) || (AA_125_lb_2 == AA_125_lb_4) || (AA_125_lb_2 == AA_125_lb_5) || (AA_125_lb_2 == AA_125_lb_6) || (AA_125_lb_2 == AA_125_lb_7) || (AA_125_lb_2 == AA_125_lb_8) )
	{
		alert("You have picked" + AA_125_lb_2 + " more than once." );
		document.getElementById('AA_125_lb_2').focus();
		return;
	}
	if( (AA_125_lb_3 == AA_125_lb_4) || (AA_125_lb_3 == AA_125_lb_5) || (AA_125_lb_3 == AA_125_lb_6) || (AA_125_lb_3 == AA_125_lb_7) || (AA_125_lb_3 == AA_125_lb_8) )
	{
		alert("You have picked" + AA_125_lb_3 + " more than once." );
		document.getElementById('AA_125_lb_3').focus();
		return;
	}
	if( (AA_125_lb_4 == AA_125_lb_5) || (AA_125_lb_4 == AA_125_lb_6) || (AA_125_lb_4 == AA_125_lb_7) || (AA_125_lb_4 == AA_125_lb_8) )
	{
		alert("You have picked" + AA_125_lb_4 + " more than once." );
		document.getElementById('AA_125_lb_4').focus();
		return;
	}
	if( (AA_125_lb_5 == AA_125_lb_6) || (AA_125_lb_5 == AA_125_lb_7) || (AA_125_lb_5 == AA_125_lb_8) )
	{
		alert("You have picked" + AA_125_lb_5 + " more than once." );
		document.getElementById('AA_125_lb_5').focus();
		return;
	}
	if( (AA_125_lb_6 == AA_125_lb_7) || (AA_125_lb_6 == AA_125_lb_8) )
	{
		alert("You have picked" + AA_125_lb_6 + " more than once." );
		document.getElementById('AA_125_lb_6').focus();
		return;
	}
	if( (AA_125_lb_7 == AA_125_lb_8) )
	{
		alert("You have picked" + AA_125_lb_7 + " more than once." );
		document.getElementById('AA_125_lb_7').focus();
		return;
	}

	var queryString = "?AA_" + weight + "_lb_1=" + AA_125_lb_1;
	queryString = queryString + "&AA_" + weight + "_lb_2=" + AA_125_lb_2;
	queryString = queryString + "&AA_" + weight + "_lb_3=" + AA_125_lb_3;
	queryString = queryString + "&AA_" + weight + "_lb_4=" + AA_125_lb_4;
	queryString = queryString + "&AA_" + weight + "_lb_5=" + AA_125_lb_5;
	queryString = queryString + "&AA_" + weight + "_lb_6=" + AA_125_lb_6;
	queryString = queryString + "&AA_" + weight + "_lb_7=" + AA_125_lb_7;
	queryString = queryString + "&AA_" + weight + "_lb_8=" + AA_125_lb_8;

	queryString = queryString + "&wcuid=" + getCookie( "wcuid" );

	queryString = queryString + "&weight=" + weight;

	ajaxRequest.open("GET", "http://www.important-info.com/ncaa/php/submit_all_americans.php"+queryString, true);
	ajaxRequest.send(null); 
}

function submitAllAmericanPlacementPicks( weight )
{
	var ajaxRequest;  // The variable that makes Ajax possible!

	//alert("|" + document.getElementById('AA_125_lb_1') + "|" );

	try{
		// Opera 8.0+, Firefox, Safari
		ajaxRequest = new XMLHttpRequest();
	} catch (e){
		// Internet Explorer Browsers
		try{
			ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
		} catch (e) {
			try{
				ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
			} catch (e){
				// Something went wrong
				alert("Your browser broke!");
				return false;
			}
		}
	}

	// Create a function that will receive data sent from the server
	ajaxRequest.onreadystatechange = function(){
		if(ajaxRequest.readyState == 4){
			var ajaxDisplay = document.getElementById('pick_contest_div');
			ajaxDisplay.innerHTML = ajaxRequest.responseText;
		}
	}

	var ident_string_1 = "AA_" + weight + "_lb_1";
	var ident_string_2 = "AA_" + weight + "_lb_2";
	var ident_string_3 = "AA_" + weight + "_lb_3";
	var ident_string_4 = "AA_" + weight + "_lb_4";
	var ident_string_5 = "AA_" + weight + "_lb_5";
	var ident_string_6 = "AA_" + weight + "_lb_6";
	var ident_string_7 = "AA_" + weight + "_lb_7";
	var ident_string_8 = "AA_" + weight + "_lb_8";

	//alert("Got weight var " + ident_string );

	var AA_125_lb_1 = document.getElementById(ident_string_1).value;
	var AA_125_lb_2 = document.getElementById(ident_string_2).value;
	var AA_125_lb_3 = document.getElementById(ident_string_3).value;
	var AA_125_lb_4 = document.getElementById(ident_string_4).value;
	var AA_125_lb_5 = document.getElementById(ident_string_5).value;
	var AA_125_lb_6 = document.getElementById(ident_string_6).value;
	var AA_125_lb_7 = document.getElementById(ident_string_7).value;
	var AA_125_lb_8 = document.getElementById(ident_string_8).value;
	if( (AA_125_lb_1 == AA_125_lb_2) || (AA_125_lb_1 == AA_125_lb_3) || (AA_125_lb_1 == AA_125_lb_4) || (AA_125_lb_1 == AA_125_lb_5) || (AA_125_lb_1 == AA_125_lb_6) || (AA_125_lb_1 == AA_125_lb_7) || (AA_125_lb_1 == AA_125_lb_8) )
	{
		alert("You have picked" + AA_125_lb_1 + " more than once." );
		document.getElementById('AA_125_lb_1').focus();
		return;
	}
	if( (AA_125_lb_2 == AA_125_lb_3) || (AA_125_lb_2 == AA_125_lb_4) || (AA_125_lb_2 == AA_125_lb_5) || (AA_125_lb_2 == AA_125_lb_6) || (AA_125_lb_2 == AA_125_lb_7) || (AA_125_lb_2 == AA_125_lb_8) )
	{
		alert("You have picked" + AA_125_lb_2 + " more than once." );
		document.getElementById('AA_125_lb_2').focus();
		return;
	}
	if( (AA_125_lb_3 == AA_125_lb_4) || (AA_125_lb_3 == AA_125_lb_5) || (AA_125_lb_3 == AA_125_lb_6) || (AA_125_lb_3 == AA_125_lb_7) || (AA_125_lb_3 == AA_125_lb_8) )
	{
		alert("You have picked" + AA_125_lb_3 + " more than once." );
		document.getElementById('AA_125_lb_3').focus();
		return;
	}
	if( (AA_125_lb_4 == AA_125_lb_5) || (AA_125_lb_4 == AA_125_lb_6) || (AA_125_lb_4 == AA_125_lb_7) || (AA_125_lb_4 == AA_125_lb_8) )
	{
		alert("You have picked" + AA_125_lb_4 + " more than once." );
		document.getElementById('AA_125_lb_4').focus();
		return;
	}
	if( (AA_125_lb_5 == AA_125_lb_6) || (AA_125_lb_5 == AA_125_lb_7) || (AA_125_lb_5 == AA_125_lb_8) )
	{
		alert("You have picked" + AA_125_lb_5 + " more than once." );
		document.getElementById('AA_125_lb_5').focus();
		return;
	}
	if( (AA_125_lb_6 == AA_125_lb_7) || (AA_125_lb_6 == AA_125_lb_8) )
	{
		alert("You have picked" + AA_125_lb_6 + " more than once." );
		document.getElementById('AA_125_lb_6').focus();
		return;
	}
	if( (AA_125_lb_7 == AA_125_lb_8) )
	{
		alert("You have picked" + AA_125_lb_7 + " more than once." );
		document.getElementById('AA_125_lb_7').focus();
		return;
	}

	var queryString = "?AA_" + weight + "_lb_1=" + AA_125_lb_1;
	queryString = queryString + "&AA_" + weight + "_lb_2=" + AA_125_lb_2;
	queryString = queryString + "&AA_" + weight + "_lb_3=" + AA_125_lb_3;
	queryString = queryString + "&AA_" + weight + "_lb_4=" + AA_125_lb_4;
	queryString = queryString + "&AA_" + weight + "_lb_5=" + AA_125_lb_5;
	queryString = queryString + "&AA_" + weight + "_lb_6=" + AA_125_lb_6;
	queryString = queryString + "&AA_" + weight + "_lb_7=" + AA_125_lb_7;
	queryString = queryString + "&AA_" + weight + "_lb_8=" + AA_125_lb_8;

	queryString = queryString + "&wcuid=" + getCookie( "wcuid" );

	queryString = queryString + "&weight=" + weight;

	ajaxRequest.open("GET", "http://www.important-info.com/ncaa/php/submit_all_americans_placement.php"+queryString, true);
	ajaxRequest.send(null); 
}

function getBracketSheet( weight )
{
	var queryString = "?wcuid=" + getCookie( "wcuid" );
	queryString = queryString + "&weight=" + weight;

	window.open('http://www.important-info.com/ncaa/php/get_bracket.php'+queryString,'bracketWindow','width=1000,height=700', 'scrollbars,resizable,status,toolbar,menubar');
	//window.open('http://www.important-info.com/ncaa/test.html','bracketWindow','width=1000,height=700');
	bracketWindow.focus();

	//$('.fixedAjaxDOMWindow').openDOMWindow({ 
		//height:700, 
		//width:900, 
		//positionType:'fixed', 
		//positionTop:0, 
		//positionLeft:0, 
		//eventType:'click', 
		//loader:1, 
		//loaderImagePath:'animationProcessing.gif', 
		loaderHeight:16, 
		//loaderWidth:17, 
		//windowSource:'ajax', 
		//windowHTTPType:'post' 
	//});

	//$('.example4demo').popupWindow({ 
		//windowURL:'http://www.important-info.com/ncaa/php/get_bracket.php', 
		//menubar:false,
		//windowName:'weight' 
	//});

	alert("Welcome again");
}

function getCookie(c_name)
{
	var i,x,y,ARRcookies=document.cookie.split(";");
	for (i=0;i<ARRcookies.length;i++)
	{
		x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
		y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
		x=x.replace(/^\s+|\s+$/g,"");
		if (x==c_name)
		{
			return unescape(y);
		}
	}
}

function setCookie(c_name,value,exdays)
{
	var exdate=new Date();
	exdate.setDate(exdate.getDate() + exdays);
	var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
	document.cookie=c_name + "=" + c_value;
}

function checkCookie()
{
	var username=getCookie("username");
	if (username!=null && username!="")
	{
		alert("Welcome again " + username);
	}
	else 
	{
		username=prompt("Please enter your name:","");
		if (username!=null && username!="")
		{
			setCookie("username",username,365);
		}
	}
}

function deleteCookie() {
document.cookie = 'wcuid=; expires=Thu, 01-Jan-70 00:00:01 GMT;';
document.cookie = 'wcun=; expires=Thu, 01-Jan-70 00:00:01 GMT;';
}

function deleteAccount() {
	var userid=getCookie("wcuid");
	var queryString = "?wcuid=" + userid;
	$.get('http://www.important-info.com/ncaa/php/delete_user_account.php'+ queryString, true);
	deleteCookie();
	return false;
}

$(document).ready(function() {
	$('#show_leaders').html('<img class="center" src="http://www.important-info.com/ncaa/images/ajax-loader-2.gif" />');
   $.ajaxSetup({ cache: false }); // This part addresses an IE bug.  without it, IE will only load the first number and will never refresh
   setInterval(function() {
   $('#show_leaders').load('http://www.important-info.com/ncaa/php/get_leaders.php');
}, 5000); // the "5000" here refers to the time to refresh the div.  it is in milliseconds.
});

//-->
</script>

<body id="body-color-tag">
		<table border="0">
			<tr>
				<td id="masthead" colspan="3"> 

					<div id="masthead_div">
						<table id="masthead_table" border="0">
							<tr>
								<td id="masthead_logo">
									<image id="logo_image" src="./images/wc_logo_small.jpg" class="styled-logo">
								</td>

								<td id="masthead_title">
									NCAA Wrestling Championships - Pick'm Contests
								</td>

								<td id="masthead_username">

									<font size="2px">
									<?php   
										if (isset($_COOKIE["wcun"]))
											echo "Welcome " . $_COOKIE["wcun"] . "<br />"; 
										else    
									?>  
									</font>
								</td>
							</tr>
						</table>
					</div>

				</td>
			</tr>

			<tr>
				<td id="nav" colspan="3"> 
					<div id="nav_div">
						&nbsp; <a href="http://www.important-info.com/ncaa/selections.html"> Your Selections </a>
					</div>
				</td>
			</tr>

			<tr>

				<td id="lsidebar"> 
					<div id="left_sidebar_div">
						<p id="home-content-leaderboard-title"> <b>Leader Board:</b> </p>
						<div id="show_leaders">
						</div>

						<p id="home-content-contest"><b>See Your Picks:</b></p>
							<div id="home-content-leaderboard-individuals-odd">
								<a href="http://www.important-info.com/ncaa/selections.html#show_user_winner_picks"><div id="left_sidebar_indent">Individual Winners</div></a>
							</div>

							<div id="home-content-leaderboard-individuals-even">
								<a href="http://www.important-info.com/ncaa/selections.html#show_user_aa_placement_picks"><div id="left_sidebar_indent">All American Placement</div></a>
							</div>

							<div id="home-content-leaderboard-individuals-odd">
								<a href="http://www.important-info.com/ncaa/selections.html#show_user_aa_picks"><div id="left_sidebar_indent">All Americans</div></a>
							</div>

							<div id="home-content-leaderboard-individuals-even">
								<a href="http://www.important-info.com/ncaa/selections.html"><div id="left_sidebar_indent">Bout by Bout</div></a>
							</div>
					</div>
				</td>

				<td id="content">
					<div id="content_div">

						<image src="./images/Header11.jpg" width="100%" height="300" class="styled-logo">
						<div class="styled-select">
						<div id="pick_contest">
							<form name='myForm'>
								<br />
								Choose Contest: 
								<br />

								<table border="0">
									<tr>
										<td>
											<select id='contest'>
											<option value='pick_winners'>Pick Individual Winners</option>
											<option value='pick_all_americans'>Pick All Americans</option>
											<option value='pick_all_americans_placement'>Pick All American Placement</option>
											<option value='pick_bout_by_bout'>Pick Bout by Bout</option>
											</select>
										</td>
										<td>
											<input type='button' class="styled-button" onclick='pickContestFunction(125)' value='Start Contest' />
										</td>
									</tr>
								</table>

							</form>
							<div id='pick_contest_div'>Your Contest will display here</div>
							<br />
						</div>
						</div>
					</div>
				</td>

				<td id="rsidebar"> 
					<div id="right_sidebar_div">
						<!--
						Right Sidebar 
						-->
					</div>
				</td>

			</tr>

			<tr>
				<td id="footer" colspan="3">
					<div id="footer_div">
						<br />
						&nbsp; <a href="http://www.important-info.com/ncaa/index.html" onclick='deleteCookie()'> Log out </a>
						&nbsp;
						&nbsp;
						&nbsp;
						&nbsp; <a href="http://www.important-info.com/ncaa/pick_winners_rules.html"> Pick Winners Rules </a>
						&nbsp;
						&nbsp;
						&nbsp;
						&nbsp; <a href="http://www.important-info.com/ncaa/pick_all_american_rules.html"> Pick All Americans Rules </a>
						&nbsp;
						&nbsp;
						&nbsp;
						&nbsp; <a href="http://www.important-info.com/ncaa/pick_all_american_placement_rules.html"> Pick All Americans Placement Rules </a>
						&nbsp;
						&nbsp;
						&nbsp;
						&nbsp; <a href="http://www.important-info.com/ncaa/index.html" onclick='deleteAccount()'> Delete Account </a>
						<br />
					<div>
				<td>
			</tr>
	</table>
</body>
</html>

